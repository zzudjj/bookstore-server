# ç§’æ€ç³»ç»Ÿæ•°æ®åº“æ›´æ–°æŒ‡å—

## ðŸ“‹ æ¦‚è¿°

æœ¬æ¬¡æ›´æ–°ä¸ºçŽ°æœ‰çš„bookstoreç³»ç»Ÿæ·»åŠ äº†å®Œæ•´çš„ç§’æ€åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç§’æ€æ´»åŠ¨ç®¡ç†ã€å•†å“ç®¡ç†ã€ç”¨æˆ·é™è´­ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

## ðŸ—ƒï¸ æ¶‰åŠçš„æ•°æ®è¡¨

### æ–°å¢žè¡¨ï¼š
1. **spikeactivity** - ç§’æ€æ´»åŠ¨è¡¨
2. **spikegoods** - ç§’æ€å•†å“è¡¨  
3. **spikerecord** - ç§’æ€è®°å½•è¡¨ï¼ˆç”¨äºŽé™è´­æ£€æŸ¥å’Œè¡Œä¸ºåˆ†æžï¼‰

### ä¿®æ”¹è¡¨ï¼š
- **spikerecord** - æ·»åŠ äº† `quantity` å­—æ®µç”¨äºŽé™è´­åŠŸèƒ½

### åˆ é™¤è¡¨ï¼š
- **spikeorder** - å·²åˆ é™¤ï¼Œæ”¹ç”¨ç»Ÿä¸€è®¢å•ç³»ç»Ÿ

## ðŸš€ å®‰è£…æ­¥éª¤

### 1. å¤‡ä»½æ•°æ®åº“ï¼ˆé‡è¦ï¼ï¼‰
```bash
mysqldump -u root -p bookstore > bookstore_backup_$(date +%Y%m%d_%H%M%S).sql
```

### 2. æ‰§è¡Œæ›´æ–°è„šæœ¬
```bash
mysql -u root -p bookstore < spike_system_update.sql
```

æˆ–è€…åœ¨MySQLå®¢æˆ·ç«¯ä¸­ï¼š
```sql
USE bookstore;
SOURCE /path/to/spike_system_update.sql;
```

### 3. éªŒè¯å®‰è£…
è„šæœ¬æ‰§è¡Œå®ŒæˆåŽä¼šæ˜¾ç¤ºï¼š
- åˆ›å»ºçš„è¡¨åˆ—è¡¨
- å„è¡¨çš„è®°å½•æ•°é‡
- å®‰è£…å®Œæˆæç¤º

## ðŸ“Š æ•°æ®è¡¨ç»“æž„è¯´æ˜Ž

### spikeactivityï¼ˆç§’æ€æ´»åŠ¨è¡¨ï¼‰
- ç®¡ç†ç§’æ€æ´»åŠ¨çš„åŸºæœ¬ä¿¡æ¯
- åŒ…å«æ´»åŠ¨æ—¶é—´ã€çŠ¶æ€ç­‰å­—æ®µ
- æ”¯æŒæ´»åŠ¨çš„åˆ›å»ºã€ç¼–è¾‘ã€å¯åœ

### spikegoodsï¼ˆç§’æ€å•†å“è¡¨ï¼‰
- ç®¡ç†å‚ä¸Žç§’æ€çš„å•†å“ä¿¡æ¯
- å…³è”å›¾ä¹¦è¡¨(book)å’Œæ´»åŠ¨è¡¨(spikeactivity)
- åŒ…å«ç§’æ€ä»·æ ¼ã€åº“å­˜ã€é™è´­æ•°é‡ç­‰

### spikerecordï¼ˆç§’æ€è®°å½•è¡¨ï¼‰
- è®°å½•æ‰€æœ‰ç§’æ€è¡Œä¸ºï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
- **æ–°å¢žquantityå­—æ®µ**ï¼šç”¨äºŽé™è´­æ£€æŸ¥
- åŒ…å«IPåœ°å€ã€ç”¨æˆ·ä»£ç†ç­‰è¯¦ç»†ä¿¡æ¯

## ðŸ”§ æ ¸å¿ƒåŠŸèƒ½

### 1. é™è´­æ£€æŸ¥
é€šè¿‡spikerecordè¡¨ç»Ÿè®¡ç”¨æˆ·æˆåŠŸè´­ä¹°æ•°é‡ï¼š
```sql
SELECT COALESCE(SUM(quantity), 0) 
FROM spikerecord 
WHERE userAccount = ? AND spikeGoodsId = ? AND result = 1
```

### 2. åº“å­˜ç®¡ç†
- ç§’æ€åº“å­˜ç‹¬ç«‹ç®¡ç†
- ä¸Žå›¾ä¹¦è¡¨åº“å­˜åŒæ­¥æ‰£å‡
- æ”¯æŒåº“å­˜å›žæ»šæœºåˆ¶

### 3. ç»Ÿä¸€è®¢å•ç³»ç»Ÿ
- ç§’æ€è®¢å•ä½¿ç”¨çŽ°æœ‰è®¢å•ç³»ç»Ÿ
- é¿å…é‡å¤çš„è®¢å•ç®¡ç†é€»è¾‘
- ç”¨æˆ·ä½“éªŒç»Ÿä¸€

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. å…¼å®¹æ€§
- è„šæœ¬ä½¿ç”¨ `CREATE TABLE IF NOT EXISTS` ç¡®ä¿å®‰å…¨æ‰§è¡Œ
- è‡ªåŠ¨æ£€æŸ¥å¹¶æ·»åŠ ç¼ºå¤±çš„å­—æ®µ
- ä¸ä¼šå½±å“çŽ°æœ‰æ•°æ®

### 2. æ€§èƒ½ä¼˜åŒ–
- æ·»åŠ äº†å¤åˆç´¢å¼•æå‡æŸ¥è¯¢æ€§èƒ½
- é™è´­æ£€æŸ¥æŸ¥è¯¢å·²ä¼˜åŒ–
- æ”¯æŒé«˜å¹¶å‘ç§’æ€åœºæ™¯

### 3. æ•°æ®å®‰å…¨
- ä¿ç•™äº†å¤–é”®çº¦æŸç¡®ä¿æ•°æ®å®Œæ•´æ€§
- æ”¯æŒçº§è”åˆ é™¤é¿å…å­¤ç«‹æ•°æ®
- å»ºè®®å®šæœŸå¤‡ä»½æ•°æ®

## ðŸ§ª æµ‹è¯•æ•°æ®

è„šæœ¬ä¼šè‡ªåŠ¨æ’å…¥ç¤ºä¾‹æ•°æ®ï¼š
- 3ä¸ªç§’æ€æ´»åŠ¨ï¼ˆæ–°å¹´ç‰¹æƒ ã€åˆé—´åœºã€æ™šé—´åœºï¼‰
- 7ä¸ªç§’æ€å•†å“ï¼ˆåŸºäºŽçŽ°æœ‰å›¾ä¹¦ï¼‰
- å¯ç”¨äºŽåŠŸèƒ½æµ‹è¯•å’Œæ¼”ç¤º

## ðŸ“ž æŠ€æœ¯æ”¯æŒ

å¦‚æžœåœ¨å®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. **æ£€æŸ¥MySQLç‰ˆæœ¬**ï¼šå»ºè®®ä½¿ç”¨MySQL 8.0+
2. **æ£€æŸ¥æƒé™**ï¼šç¡®ä¿ç”¨æˆ·æœ‰CREATEã€ALTERã€INSERTæƒé™
3. **æ£€æŸ¥ä¾èµ–**ï¼šç¡®ä¿bookè¡¨å’Œuserè¡¨å­˜åœ¨
4. **æŸ¥çœ‹æ—¥å¿—**ï¼šæ£€æŸ¥MySQLé”™è¯¯æ—¥å¿—

## ðŸ”„ å›žæ»šæ–¹æ¡ˆ

å¦‚éœ€å›žæ»šæ›´æ–°ï¼š
```sql
-- åˆ é™¤ç§’æ€ç›¸å…³è¡¨
DROP TABLE IF EXISTS spikerecord;
DROP TABLE IF EXISTS spikegoods; 
DROP TABLE IF EXISTS spikeactivity;

-- æ¢å¤å¤‡ä»½ï¼ˆå¦‚æžœéœ€è¦ï¼‰
-- mysql -u root -p bookstore < bookstore_backup_YYYYMMDD_HHMMSS.sql
```

## ðŸ“ˆ ç‰ˆæœ¬ä¿¡æ¯

- **ç‰ˆæœ¬**ï¼šv1.0
- **å‘å¸ƒæ—¥æœŸ**ï¼š2024-01-01
- **å…¼å®¹æ€§**ï¼šbookstoreç³»ç»Ÿ v1.0+
- **MySQLç‰ˆæœ¬**ï¼š5.7+ / 8.0+
